# Fit AI - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–¥–∏–µ—Ç–æ–ª–æ–≥

Telegram Mini App —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ò–ò –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∏—Ç–∞–Ω–∏—è, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ YooKassa.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì∏ **AI-–∞–Ω–∞–ª–∏–∑ –µ–¥—ã** –ø–æ —Ñ–æ—Ç–æ —Å –ø–æ–º–æ—â—å—é Gemini API
- üìä **–¢—Ä–µ–∫–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è** —Å —Ä–∞—Å—á—ë—Ç–æ–º –ö–ë–ñ–£
- üéØ **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏** –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- üí≥ **–†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏** —á–µ—Ä–µ–∑ YooKassa (PRO/Premium)
- ü§ñ **Telegram –±–æ—Ç** —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** –∏ –æ—Ç—á—ë—Ç—ã
- üèÜ **–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π**

## üìã –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend
- React 19 + TypeScript
- Vite
- Tailwind CSS
- Recharts (–≥—Ä–∞—Ñ–∏–∫–∏)
- Telegram WebApp SDK

### Backend
- Node.js + Express
- Telegraf (Telegram Bot)
- YooKassa API (–ø–ª–∞—Ç–µ–∂–∏)
- Gemini API (AI)
- node-cron (–∑–∞–¥–∞—á–∏)

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone <repository-url>
   cd fit-ai2-main
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   npm install
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```bash
   cp .env.local .env.local
   ```
   
   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local`:
   ```env
   GEMINI_API_KEY=your_key_here
   YOOKASSA_SHOP_ID=your_yookassa_shop_id
   YOOKASSA_SECRET_KEY=your_yookassa_secret_key
   TELEGRAM_BOT_TOKEN=your_bot_token
   TELEGRAM_WEBAPP_URL=http://localhost:3000
   SERVER_BASE_URL=http://localhost:4000
   ADMIN_PASSWORD=your_admin_password
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**
   ```bash
   npm run dev
   ```
   –§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
   ```bash
   npm run server
   ```
   –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:4000`

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**Windows:**
```powershell
.\run-all.ps1
```

**Linux/Mac:**
```bash
chmod +x run-all.sh
./run-all.sh
```

## üì¶ –î–µ–ø–ª–æ–π –Ω–∞ Beget

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ [`DEPLOYMENT.md`](DEPLOYMENT.md)

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

**Linux/Mac:**
```bash
npm run deploy
```

**Windows:**
```powershell
npm run deploy:windows
```

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π (–µ—Å–ª–∏ –µ—Å—Ç—å SSH –¥–æ—Å—Ç—É–ø)

```bash
npm run start:beget
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°–æ–±–µ—Ä—ë—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –¥–µ–ø–ª–æ—è
- –°–æ–∑–¥–∞—Å—Ç –∞—Ä—Ö–∏–≤ —Å timestamp
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –ö—Ä–∞—Ç–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
   ```bash
   npm run deploy
   ```

2. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Beget**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `deploy-temp/` –∏–ª–∏ –∞—Ä—Ö–∏–≤ `fit-ai-deploy-*.tar.gz`
   - `public_html/` ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ `public_html/`
   - `server/` ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ –∫–æ—Ä–µ–Ω—å
   - `package.json`, `.env.production` ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ –∫–æ—Ä–µ–Ω—å

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js**
   - –¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: Node.js
   - –§–∞–π–ª –∑–∞–ø—É—Å–∫–∞: `server/index.prod.js`
   - –ü–æ—Ä—Ç: 4000

4. **–ó–∞–ø—É—Å–∫**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Beget

## üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### YooKassa

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ [YooKassa](https://yookassa.ru)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –¥–ª—è —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±—Ö—É–∫: `https://your-domain.com/api/payments/webhook`
4. –ü–æ–ª—É—á–∏—Ç–µ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env.production`

## ‚úÖ –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–≥–ª–∞—Å–∏—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º. –î–æ–∫—É–º–µ–Ω—Ç—ã –ª–µ–∂–∞—Ç –≤ `/privacy.html` –∏ `/terms.html` –≤–Ω—É—Ç—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è ‚Äî —Ç–µ–∫—Å—Ç –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –ø—Ä—è–º–æ –≤ —ç—Ç–∏—Ö —Ñ–∞–π–ª–∞—Ö (–≤—Å–µ —Ç–µ–∫—Å—Ç—ã –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –∫–∞–≤—ã—á–∫–∞—Ö –≤ –±–ª–æ–∫–µ `CONTENT`).„ÄêF:public/privacy.html‚Ä†L1-L62„Äë„ÄêF:public/terms.html‚Ä†L1-L61„Äë

### –¢–∞—Ä–∏—Ñ—ã

| –¢–∞—Ä–∏—Ñ | –ü–µ—Ä–∏–æ–¥—ã | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ |
|-------|----------|-------------|
| Free | - | 3 —Å–∫–∞–Ω–∞/–¥–µ–Ω—å, 100 –∑–∞–ø–∏—Å–µ–π/–º–µ—Å |
| PRO | 1, 3, 6 –º–µ—Å | –ë–µ–∑–ª–∏–º–∏—Ç, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã |
| PREMIUM | 1, 3, 6 –º–µ—Å | –í—Å—ë PRO + Telegram –±–æ—Ç, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/BotFather)
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env.production`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Web App —á–µ—Ä–µ–∑ `/newapp`
4. –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
fit-ai2-main/
‚îú‚îÄ‚îÄ public/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ server/              # Backend
‚îÇ   ‚îú‚îÄ‚îÄ index.js        # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (dev)
‚îÇ   ‚îú‚îÄ‚îÄ index.prod.js   # –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (prod)
‚îÇ   ‚îú‚îÄ‚îÄ yookassa.js     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è YooKassa
‚îÇ   ‚îú‚îÄ‚îÄ bot.js         # Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ storage.js      # –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ data/          # –î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–æ–∫
‚îú‚îÄ‚îÄ src/                # Frontend
‚îÇ   ‚îú‚îÄ‚îÄ components/     # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ context/        # React Context
‚îÇ   ‚îú‚îÄ‚îÄ services/       # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/         # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ admin-panel/        # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ dist/              # –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ .env.production     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (prod)
```

## üîß API Endpoints

### –ü–ª–∞—Ç–µ–∂–∏
- `POST /api/payments/create` - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç—ë–∂
- `GET /api/payments/status/:id` - –°—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
- `POST /api/payments/webhook` - –í–µ–±—Ö—É–∫ YooKassa
- `POST /api/payments/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `POST /api/user/profile` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### –ê–¥–º–∏–Ω
- `GET /api/admin/subscriptions` - –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
- `POST /api/admin/subscriptions/set-tier` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ
- `POST /api/admin/notify` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°–∏—Å—Ç–µ–º–∞
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
npm run dev

# –¢–µ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞
npm run server

# –¢–µ—Å—Ç —Å–±–æ—Ä–∫–∏
npm run build
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º YooKassa
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±—Ö—É–∫

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

- **Frontend**: –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- **Backend**: `server-out.log`, `server-err.log`
- **Beget**: –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –õ–æ–≥–∏

### –ú–µ—Ç—Ä–∏–∫–∏

- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π
- –û—à–∏–±–∫–∏ API

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
- ‚úÖ CORS –∑–∞—â–∏—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ YooKassa
- ‚úÖ –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø–∞—Ä–æ–ª–µ–º

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Cannot find module"
```bash
npm install
```

### –û—à–∏–±–∫–∞ "Port already in use"
–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `.env.local` –∏–ª–∏ `.env.production`

### Telegram Web App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTPS
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –≤ `ALLOWED_ORIGINS`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [`DEPLOYMENT.md`](DEPLOYMENT.md)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
3. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è Fit AI**
